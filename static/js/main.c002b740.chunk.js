(this["webpackJsonpmanta-front-end"]=this["webpackJsonpmanta-front-end"]||[]).push([[0],{565:function(e){e.exports=JSON.parse('{"APP_NAME":"substrate-front-end-tutorial","DEVELOPMENT_KEYRING":true,"RPC":{}}')},614:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://dev-node.substrate.dev"}')},615:function(e){e.exports=JSON.parse('{"CurrencyId":{"_enum":["MA"]},"CurrencyIdOf":"CurrencyId","Amount":"i128","AmountOf":"Amount","AccountInfo":"AccountInfoWithDualRefCount","PrivateTransferPayload":"[u8;608]","ReclaimPayload":"[u8;512]"}')},620:function(e,t){},640:function(e,t){},658:function(e,t){},661:function(e,t){},663:function(e,t){},673:function(e,t){},675:function(e,t){},705:function(e,t){},707:function(e,t){},714:function(e,t){},715:function(e,t){},804:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(176),i=n.n(c),o=n(2),s=n(184),u=n(873),l=n(869),j=n(876),b=n(874),d=n(867),p=(n(603),n(13)),O=n.n(p),f=n(31),x=n(39),h=n(433),v=n(564),y=n.n(v),m=n(453),E=n(282),S=n(396),g=n.n(S),C=n(565),R=n(614),N=n(615),T=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),k=Object(x.a)(Object(x.a)(Object(x.a)(Object(x.a)({},C),R),T),{},{types:N}),w=n(19),A={socket:y.a.parse(window.location.search).rpc||k.PROVIDER_SOCKET,jsonrpc:Object(x.a)(Object(x.a)({},h.default),k.RPC),types:k.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},_=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(x.a)(Object(x.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(x.a)(Object(x.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(x.a)(Object(x.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(x.a)(Object(x.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(x.a)(Object(x.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(x.a)(Object(x.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(x.a)(Object(x.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},P=!1,I=a.a.createContext(),D=function(e){var t=Object(x.a)({},A);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(r.useReducer)(_,t),a=Object(o.a)(n,2),c=a[0],i=a[1];return function(e,t){var n=e.apiState,r=e.socket,a=e.jsonrpc,c=e.types;if(!n){t({type:"CONNECT_INIT"});var i=new m.WsProvider(r),o=new m.ApiPromise({provider:i,types:c,rpc:a});o.on("connected",(function(){t({type:"CONNECT",payload:o}),o.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),o.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),o.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(c,i),function(e,t){var n=function(){var e=Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(E.web3Enable)(k.APP_NAME);case 4:return e.next=6,Object(E.web3Accounts)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(x.a)(Object(x.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),g.a.loadAll({isDevelopment:k.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:g.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(P)return t({type:"SET_KEYRING",payload:g.a});P=!0,n()}}(c,i),Object(w.jsx)(I.Provider,{value:c,children:e.children})},F=function(){return Object(x.a)({},Object(r.useContext)(I))},K={paramConversion:{num:["Compact<Balance>","BalanceOf","u8","u16","u32","u64","u128","i8","i16","i32","i64","i128"]}},Y=n(21),G=n(844);function U(e){var t=e.accountPair,n=void 0===t?null:t,a=e.label,c=e.setStatus,i=e.color,s=void 0===i?"blue":i,u=e.style,l=void 0===u?null:u,j=e.type,b=void 0===j?"QUERY":j,d=e.attrs,p=void 0===d?null:d,h=e.disabled,v=void 0!==h&&h,y=F().api,m=Object(r.useState)(null),S=Object(o.a)(m,2),g=S[0],C=S[1],R=Object(r.useState)(null),N=Object(o.a)(R,2),T=N[0],k=N[1],A=p.palletRpc,_=p.callable,P=p.inputParams,I=p.paramFields,D=function(){return"SUDO-TX"===b},U=function(){return"UNCHECKED-SUDO-TX"===b};Object(r.useEffect)((function(){Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&y.query.sudo){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y.query.sudo.key();case 4:(t=e.sent).isEmpty?k(null):k(t.toString());case 6:case"end":return e.stop()}}),e)})))()}),[y]);var L,M=function(){var e=Object(f.a)(O.a.mark((function e(){var t,r,a,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,r=n.meta,a=r.source,!r.isInjected){e.next=9;break}return e.next=4,Object(E.web3FromSource)(a);case 4:i=e.sent,c=t,y.setSigner(i.signer),e.next=10;break;case 9:c=n;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){var t=e.status,n=(e.events,e.dispatchError);n&&t.isFinalized?c("Transaction failed. Block hash: ".concat(t.asFinalized.toString())):n&&t.isInBlock?c("Transaction failed. Block hash: ".concat(t.asInBlock.toString())):t.isFinalized?c("\ud83d\ude09 Finalized. Block hash: ".concat(t.asFinalized.toString())):c("Current transaction status: ".concat(t.type))},W=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:t=e.sent,n=$(I,P),e.prev=4,n?y.tx.sudo.sudo((r=y.tx[A])[_].apply(r,Object(Y.a)(n))):y.tx.sudo.sudo(y.tx[A][_]()),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(4),c("Transaction failed. ".concat(e.t0.toString())),e.abrupt("return");case 12:a=txExecute.signAndSend(t,B),C((function(){return a}));case 14:case"end":return e.stop()}}),e,null,[[4,8]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:n=e.sent,r=y.tx.sudo.sudoUncheckedWeight((t=y.tx[A])[_].apply(t,Object(Y.a)(P)),0),a=r.signAndSend(n,B),C((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return n=e.sent,r=$(I,P),a=r?(t=y.tx[A])[_].apply(t,Object(Y.a)(r)):y.tx[A][_](),e.next=7,a.signAndSend(n,B);case 7:c=e.sent,C((function(){return c}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(I,P),r=n?(t=y.tx[A])[_].apply(t,Object(Y.a)(n)):y.tx[A][_](),e.next=4,r.send(B);case 4:a=e.sent,C((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){return e.isNone?c("None"):c(e.toString())},X=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(I,P),e.next=3,(t=y.query[A])[_].apply(t,Object(Y.a)(n).concat([J]));case 3:r=e.sent,C((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(I,P,{emptyAsNull:!1}),e.next=3,(t=y.rpc[A])[_].apply(t,Object(Y.a)(n).concat([J]));case 3:r=e.sent,C((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=y.consts[A][_];e.isNone?c("None"):c(e.toString())},Z=function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g&&(g(),C(null)),c("Sending..."),D()&&W()||U()&&V()||"SIGNED-TX"===b&&z()||"UNSIGNED-TX"===b&&H()||"QUERY"===b&&X()||"RPC"===b&&q()||"CONSTANT"===b&&Q();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{emptyAsNull:!0},r=t.map((function(e){return"object"===typeof e&&null!==e&&"string"===typeof e.value?e.value.trim():"string"===typeof e?e.trim():e})),a=e.map((function(e,t){return Object(x.a)(Object(x.a)({},e),{},{value:r[t]||null})}));return a.reduce((function(e,t){var r=t.type,a=void 0===r?"string":r,c=t.value;if(null==c||""===c)return n.emptyAsNull?[].concat(Object(Y.a)(e),[null]):e;var i=c;return a.indexOf("Vec<")>=0?(i=(i=i.split(",").map((function(e){return e.trim()}))).map((function(e){return ee(a)?e.indexOf(".")>=0?Number.parseFloat(e):Number.parseInt(e):e})),[].concat(Object(Y.a)(e),[i])):(ee(a)&&(i=i.indexOf(".")>=0?Number.parseFloat(i):Number.parseInt(i)),[].concat(Object(Y.a)(e),[i]))}),[])},ee=function(e){return K.paramConversion.num.some((function(t){return e.indexOf(t)>=0}))};return Object(w.jsx)(G.a,{basic:!0,color:s,style:l,type:"submit",onClick:Z,disabled:v||!A||!_||!(0===I.length||I.every((function(e,t){var n=P[t];if(e.optional)return!0;if(null==n)return!1;var r="object"===typeof n?n.value:n;return null!==r&&""!==r})))||(D()||U())&&(L=n,!(T&&L&&L.address===T)),children:a})}function L(e){var t=F(),r=t.api,a=t.apiState,c=t.keyring,i=t.keyringState;return"READY"===a&&(window.api=r),"READY"===i&&(window.keyring=c),window.util=n(0),window.utilCrypto=n(17),null}var M=n(582),B=n(866),W=n(871),V=n(870),z=n(286),H=n(186);function J(e){var t=F().keyring,n=e.setAccountAddress,a=Object(r.useState)(""),c=Object(o.a)(a,2),i=c[0],u=c[1],l=t.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),j=l.length>0?l[0].value:"";Object(r.useEffect)((function(){n(j),u(j)}),[n,j]);var b=Object(r.createRef)();return Object(w.jsx)(B.a,{context:b,children:Object(w.jsx)(W.a,{attached:"top",tabular:!0,style:{backgroundColor:"MidnightBlue",borderColor:"MidnightBlue",paddingTop:"1em",paddingBottom:"1em"},children:Object(w.jsxs)(d.a,{children:[Object(w.jsxs)(W.a.Menu,{position:"left",style:{alignItems:"center"},children:[Object(w.jsx)(W.a.Item,{name:"MA Token",children:Object(w.jsx)(s.b,{to:"/ma_token",children:"MA Token"})}),Object(w.jsx)(W.a.Item,{name:"Labs",children:Object(w.jsx)(s.b,{to:"/labs",children:"Labs"})}),Object(w.jsx)(W.a.Item,{name:"Governance",children:Object(w.jsx)(s.b,{to:"/governance",children:"Governance"})})]}),Object(w.jsxs)(W.a.Menu,{position:"right",style:{alignItems:"center"},children:[i?null:Object(w.jsxs)("span",{children:["Add your account with the"," ",Object(w.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://polkadot.js.org/extension/",children:"Polkadot JS Extension"})]}),Object(w.jsx)(M.CopyToClipboard,{text:i,children:Object(w.jsx)(G.a,{basic:!0,circular:!0,size:"large",icon:"user",color:i?"blue":"red"})}),Object(w.jsx)(V.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select an account",options:l,onChange:function(e,t){var r;r=t.value,n(r),u(r)},value:i}),Object(w.jsx)(X,{accountSelected:i})]})]})})})}function X(e){var t=e.accountSelected,n=F().api,a=Object(r.useState)(0),c=Object(o.a)(a,2),i=c[0],s=c[1];return Object(r.useEffect)((function(){var e;return t&&n.query.system.account(t,(function(e){s(e.data.free.toHuman())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[n,t]),t?Object(w.jsxs)(z.a,{pointing:"left",children:[Object(w.jsx)(H.a,{name:"money",color:"green"}),i]}):null}function q(e){var t=F(),n=t.api;return t.keyring.getPairs&&n.query?Object(w.jsx)(J,Object(x.a)({},e)):null}var Q=n(51),Z=n(35),$=n(877),ee=n(872),te=n(868),ne=n(16),re=n.n(ne);function ae(e){var t=F().api.registry.chainDecimals;return e*new re.a(10).pow(new re.a(t))}function ce(e){var t=Object(r.useState)(null),n=Object(o.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)({addressTo:null,amount:0}),s=Object(o.a)(i,2),u=s[0],l=s[1],b=e.accountPair,d=function(e,t){return l((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(Z.a)({},t.state,t.value))}))},p=u.addressTo,O=u.amount;return Object(w.jsxs)(j.a.Column,{width:8,children:[Object(w.jsx)($.a,{textAlign:"center",children:"Transfer MA Token"}),Object(w.jsxs)(ee.a,{children:[Object(w.jsx)(ee.a.Field,{style:{width:"500px",textAlign:"center"},children:Object(w.jsx)(te.a,{fluid:!0,label:"To",type:"text",placeholder:"address",state:"addressTo",onChange:d})}),Object(w.jsx)(ee.a.Field,{style:{width:"500px"},children:Object(w.jsx)(te.a,{fluid:!0,label:"Amount",type:"number",placeholder:"MA",state:"amount",onChange:d})}),Object(w.jsx)(ee.a.Field,{style:{textAlign:"center"},children:Object(w.jsx)(U,{accountPair:b,label:"Submit",type:"SIGNED-TX",setStatus:c,attrs:{palletRpc:"balances",callable:"transfer",inputParams:[p,ae(O)],paramFields:[!0,!0]}})}),Object(w.jsx)("div",{style:{overflowWrap:"break-word"},children:a})]})]})}var ie=n(17);function oe(e){var t=e.accountPair,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(""),u=Object(o.a)(s,2),l=u[0],d=u[1],p=Object(r.useState)(""),x=Object(o.a)(p,2),h=x[0],v=x[1],y=Object(r.useState)(""),m=Object(o.a)(y,2),E=m[0],S=m[1],g=Object(r.useState)(""),C=Object(o.a)(g,2),R=C[0],N=C[1],T=Object(r.useState)(""),k=Object(o.a)(T,2),A=k[0],_=k[1],P=Object(r.useState)(null),I=Object(o.a)(P,2),D=I[0],F=I[1],K=Object(r.useRef)(),Y=Object(r.useState)(""),G=Object(o.a)(Y,2),L=G[0],M=G[1],B=function(e){if(!e)return"";for(var t="",n=0;n<e.length;n++)t+=e.slice(n,n+75),t+="\n",n+=75;return t},W=function(e){i(e),d(Object(ie.base64Encode)(e.slice(0,96))),v(Object(ie.base64Encode)(e.slice(97,192))),S(Object(ie.base64Encode)(e.slice(193,304))),N(Object(ie.base64Encode)(e.slice(305,416))),_(Object(ie.base64Encode)(e.slice(317,608)))},V=function(e){try{Object(ie.base64Validate)(e)}catch(n){return K.current.value=null,M("File is not valid base64"),!1}var t=Object(ie.base64Decode)(e.trim());return 608===t.length||(K.current.value=null,M("File is ".concat(t.length," bytes, expected 608")),!1)};return Object(w.jsxs)(j.a.Column,{width:10,children:[Object(w.jsx)($.a,{textAlign:"center",children:"Private Transfer"}),Object(w.jsxs)(ee.a,{children:[Object(w.jsxs)(ee.a.Field,{inline:"true",style:{textAlign:"center"},children:[Object(w.jsx)(z.a,{basic:!0,color:"teal",children:"Upload a private payment file (608 bytes)"}),Object(w.jsx)("input",{accept:".txt",id:"file",type:"file",onChange:function(){M(""),W([]);var e=K.current.files[0];if(e){var t=new FileReader;t.readAsText(e),t.onload=function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,V(n)&&W(Object(ie.base64Decode)(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ref:K,style:{marginLeft:0,marginTop:".5em",border:"0px"}}),Object(w.jsx)(b.a,{error:!0,onDismiss:function(){return M("")},header:"Upload failed",content:L,visible:L.length})]}),Object(w.jsxs)(ee.a.Field,{children:[Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Sender1:"})," ",B(l)]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Sender2:"})," ",B(h)]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Receiver1:"})," ",B(E)]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Receiver2:"})," ",B(R)]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Proof:"})," ",B(A)]})]}),Object(w.jsx)(ee.a.Field,{style:{textAlign:"center"},children:Object(w.jsx)(U,{accountPair:t,label:"Submit",type:"SIGNED-TX",setStatus:F,attrs:{palletRpc:"mantaPay",callable:"privateTransfer",inputParams:[c],paramFields:[!0]}})}),Object(w.jsx)("div",{style:{overflowWrap:"break-word"},children:D})]})]})}function se(e){return Object(w.jsx)("div",{children:"todo"})}function ue(e){var t=e.accountPair;return Object(w.jsxs)(Q.d,{children:[Object(w.jsx)(Q.a,{exact:!0,from:"/",to:"/ma_token"}),Object(w.jsx)(Q.a,{exact:!0,from:"/substrate-front-end-template",to:"/ma_token"}),Object(w.jsx)(Q.b,{path:"/ma_token",component:function(){return Object(w.jsx)(ce,{accountPair:t})}}),Object(w.jsx)(Q.b,{path:"/labs",component:function(){return Object(w.jsx)(oe,{accountPair:t})}}),Object(w.jsx)(Q.b,{path:"/governance",component:se})]})}function le(){var e,t=Object(r.useState)(null),n=Object(o.a)(t,2),a=n[0],c=n[1],i=F(),p=i.apiState,O=i.keyring,f=i.keyringState,x=i.apiError,h=a&&"READY"===f&&O.getPair(a),v=function(e){return Object(w.jsx)(u.a,{active:!0,children:Object(w.jsx)(l.a,{size:"small",children:e})})};if("ERROR"===p)return e=x,Object(w.jsx)(j.a,{centered:!0,columns:2,padded:!0,children:Object(w.jsx)(j.a.Column,{children:Object(w.jsx)(b.a,{negative:!0,compact:!0,floating:!0,header:"Error Connecting to Substrate",content:"".concat(JSON.stringify(e,null,4))})})});if("READY"!==p)return v("Connecting to Substrate");if("READY"!==f)return v("Loading accounts (please review any extension's authorization)");var y=Object(r.createRef)();return Object(w.jsx)("div",{ref:y,children:Object(w.jsxs)(s.a,{children:[Object(w.jsx)(q,{setAccountAddress:c}),Object(w.jsx)(d.a,{textAlign:"center",style:{paddingTop:"3em"},children:Object(w.jsx)(j.a,{centered:!0,children:Object(w.jsx)(ue,{accountPair:h})})}),Object(w.jsx)(L,{})]})})}function je(){return Object(w.jsx)(D,{children:Object(w.jsx)(le,{})})}i.a.render(Object(w.jsx)(je,{}),document.getElementById("root"))}},[[804,1,2]]]);
//# sourceMappingURL=main.c002b740.chunk.js.map